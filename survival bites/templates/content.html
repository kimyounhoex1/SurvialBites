{% extends "base.html" %} {% block title %}포스팅 상세 페이지{% endblock %} {%
block content %}
<script>
  var postId = "{{ post['_id'] }}";

  function join() {
    $.ajax({
      type: "POST",
      url: "/join",
      data: { post_id: postId },
      success: function (response) {
        if (response["result"] != "success") {
          console.log("참여 실패");
          alert(response["message"]);
        } else {
          console.log("참여 성공!");
          location.reload();
        }
      },
    });
  }
</script>
<div class="post-detail" id="{{post['_id']}}">
  <div class="head-area">
    <span>{{post['title']}}</span>
    <span>{{post['current_participants']}}/{{post['max_of_participants']}}명</span>
    <span>{{post['date']}}</span>
  </div>
  <div class="image-area">
    <img src="{{post['image']}}">
  </div>
  {% if page_type == 'postpage' %}
    <div class="content-area">{{post['content']}}</div>
    <button
      class="list-btn button is-light"
      onclick="window.location.href = '/peopleList.html'"
    >
      참여자 목록
    </button>
  {% else %}  
  <div class="content-area">{{post['content']}}</div>
    <button
      class="list-btn button is-light"
      onclick="window.location.href = '/peopleList.html'"
    >
      수정하기
    </button>
  {% endif %}
  {% if page_type == 'postpage' %}
  <button class="join-btn button is-primary" onclick="join()">
    참여하기
  </button>
  {% else %}  
    <button class="join-btn button is-primary" onclick="join()">
      삭제하기
    </button>
    {% endif %}
  </div>
  {% endblock %}
</div>
